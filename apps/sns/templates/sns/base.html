<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <title>SNS</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand " href="{{ url_for('sns.index') }}">sns</a>
            <!-- 画像検索フォームを追加する -->
            {% if request.endpoint == 'sns.index' or (request.endpoint == 'sns.post_detail' and post_id is defined) %}
                <!-- URL生成部分 -->
                <div class="btn-group">
                    <form method="POST" action="{{ url_for('sns.search') }}">
                        {{ form.hidden_tag() }}
                        <div class="input-group">
                            <input type="text" class="form-control" name="keyword" placeholder="検索キーワード" required>
                            <div class="input-group-append">
                                <button class="btn btn-primary" type="submit">検索</button>
                            </div>
                        </div>
                    </form>
                </div>
            {% endif %}
            
            <ul class="navbar-nav">
                {% if current_user.is_authenticated %}
                <li class="nav-item">
                    <a href="{{ url_for('sns.mypage') }}" class="nav-link">{{ current_user.username }}</a>
                </li>                
                <li class="nav-item">
                    <a href="{{ url_for('auth.logout') }}" class="nav-link">ログアウト</a>
                </li>
                {% else %}
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('auth.signup') }}">
                        新規登録</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('auth.login') }}">
                        ログイン</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </nav>

    <section class="container">
        {% block content %}{% endblock %}
    </section>
</body>

</html>