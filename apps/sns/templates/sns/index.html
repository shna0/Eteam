{% extends "sns/base.html" %}
{% block content %}

<div class="col-md-10 text-right">
    <a href="{{ url_for('sns.post') }}" class="btn btn-success">新規投稿</a>
</div>

<div class="row">
    <div class="posts d-flex flex-row flex-wrap">
        {% for post in posts %}
            <div class="col-lg-6 mb-4" >
                <div class="card shadow mb-4">
                    <!-- Card Header -->
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold text-primary">
                            <div class="post">
                                <a href="{{ url_for('sns.user_page', user_id=post.user_id) if post.user_id != current_user.id else url_for('sns.mypage') }}">
                                    <img  src="{{ url_for('sns.image_file', filename=post.user.icon_path or 'default_icon.png') }}" alt="アイコン" style="width: 30px; height: 30px; border-radius: 50%;" />
                                </a>
                                <a href="{{ url_for('sns.post_detail', post_id=post.post_id) }}">
                                    {{ post.title }}
                                </a>
                            </div>
                        </h6>
                    </div>
                    <!-- Card Body -->
                    <div class="card-body">
                        <div class="text-center">
                            {% for image in post.images %}
                            <img class="img-fluid px-3 px-sm-4 mt-3 mb-4" src="{{ url_for('sns.image_file', filename=image.post_image_path) }}" alt="投稿画像" style="width: 100%; height: 300px; object-fit: cover;" />
                            {% endfor %}
                        </div>
                        <div class="mt-4 text-center small">
                            投稿者: {{ post.user.username }} | 投稿日時: {{ post.timestamp }}
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

</div>
<!-- 投稿一覧 -->
<!-- <div class="posts">
    {% for post in posts %}
        <div class="post">
            <h3><a href="{{ url_for('sns.post_detail', post_id=post.post_id) }}">{{ post.title }}</a></h3>
                {% for image in post.images %}
                    <img src="{{ url_for('sns.image_file', filename=image.post_image_path) }}" alt="投稿画像" style="width: 300px; height: auto; object-fit: cover; display: block; margin: 0 auto;" />
                {% endfor %} -->
        <!-- 投稿者のアイコンをクリックしたらマイページに飛ぶ -->
        <!--<small>
                <a href="{{ url_for('sns.user_page', user_id=post.user_id) if post.user_id != current_user.id else url_for('sns.mypage') }}">
                    <img src="{{ url_for('sns.image_file', filename=post.user.icon_path or 'default_icon.png') }}" alt="アイコン" style="width: 30px; height: 30px; border-radius: 50%;" />
                </a>
                投稿者: {{ post.user.username }} | 投稿日時: {{ post.timestamp }}
            </small>
        </div>
        <hr />
    {% endfor %}
</div> -->
{% endblock %}
